#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Author: ç†ŠğŸ»æ¥ä¸ªğŸ¥¬
# @Date:  2024/12/25
# @Description: [å¯¹æ–‡ä»¶åŠŸèƒ½ç­‰çš„ç®€è¦æè¿°ï¼ˆå¯è‡ªè¡Œæ·»åŠ ï¼‰]
# =======================é—­åŒ… çš„ æ¦‚å¿µ ä¸¾ä¾‹  å’Œè¿‡ç¨‹ =====================================================
# def greet(name):
#     print(f"Hello, {name}!")

# å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡
# greeting = greet
# greeting("Alice")  # è¾“å‡º Hello, Alice!
# ===ä¹Ÿå¯ä»¥ç›´æ¥ç¼–å†™ greet("Alice")  è¾“å‡ºåŒä¸Š

# å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°
# def run_func(func, arg):
#     func(arg)

# run_func(greet, "Bob")  # è¾“å‡º Hello, Bob!

# è¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š
# funcï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ã€‚åœ¨Pythonä¸­ï¼Œå‡½æ•°åæœ¬èº«å°±æ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°å¯¹è±¡çš„å¼•ç”¨ã€‚å½“ä½ å°†ä¸€ä¸ªå‡½æ•°åä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨ä¼ é€’è¿™ä¸ªå‡½æ•°å¯¹è±¡çš„å¼•ç”¨ã€‚
# argï¼šè¿™æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå®ƒå°†è¢«ä¼ é€’ç»™ func å‡½æ•°ã€‚
# run_func å‡½æ•°çš„æµç¨‹
# å‡½æ•°è°ƒç”¨ï¼šå½“ run_func(greet, "Bob") è¢«è°ƒç”¨æ—¶ï¼Œgreet å‡½æ•°å’Œå­—ç¬¦ä¸² "Bob" è¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™ run_funcã€‚
# å‚æ•°èµ‹å€¼ï¼šåœ¨ run_func å‡½æ•°å†…éƒ¨ï¼Œfunc è¢«èµ‹å€¼ä¸º greet å‡½æ•°ï¼Œarg è¢«èµ‹å€¼ä¸º "Bob"ã€‚
# å‡½æ•°æ‰§è¡Œï¼šfunc(arg) è¿™è¡Œä»£ç å®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨ funcï¼Œå³ greet å‡½æ•°ï¼Œå¹¶ä¼ é€’ argï¼Œå³ "Bob" ä½œä¸ºå‚æ•°ã€‚ç”±äº func æ˜¯ greet çš„å¼•ç”¨ï¼Œè¿™ç­‰åŒäºç›´æ¥è°ƒç”¨ greet("Bob")ã€‚
# è¾“å‡ºç»“æœï¼šgreet å‡½æ•°æ¥æ”¶åˆ°å‚æ•° "Bob" åï¼Œæ‰§è¡Œå…¶å†…éƒ¨çš„ print è¯­å¥ï¼Œè¾“å‡º "Hello, Bob!"ã€‚
# å‚æ•°ä¼ é€’çš„è¯¦ç»†è¯´æ˜
# å‡½æ•°ä½œä¸ºå‚æ•°ï¼šåœ¨ run_func(greet, "Bob") ä¸­ï¼Œgreet æ˜¯ä¸€ä¸ªå·²ç»å®šä¹‰çš„å‡½æ•°ï¼Œå®ƒè¢«ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ run_funcã€‚è¿™æ„å‘³ç€ run_func å¯ä»¥æ¥æ”¶ä»»ä½•å‡½æ•°ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
# å‚æ•°ä¼ é€’ï¼šç¬¬äºŒä¸ªå‚æ•° "Bob" æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒè¢«ä¼ é€’ç»™ run_func ä½œä¸ºç¬¬äºŒä¸ªå‚æ•° argã€‚è¿™ä¸ªå‚æ•°éšåè¢«ä¼ é€’ç»™ func å‡½æ•°ï¼Œå³ greet å‡½æ•°ã€‚
# åŠ¨æ€å‡½æ•°è°ƒç”¨ï¼šrun_func å‡½æ•°é€šè¿‡ func(arg) è°ƒç”¨ä¼ é€’ç»™å®ƒçš„å‡½æ•°å¯¹è±¡ã€‚è¿™ç§æŠ€æœ¯å…è®¸ä½ ç¼–å†™æ›´çµæ´»çš„ä»£ç ï¼Œå› ä¸ºä½ å¯ä»¥ä¼ é€’ä¸åŒçš„å‡½æ•°ç»™ run_funcï¼Œè®©å®ƒæ‰§è¡Œä¸åŒçš„æ“ä½œã€‚
# ======================    è£…      é¥°      å™¨   ==========================================

def decorator(func):
    def wrapper(*args, **kwargs): # *argså’Œ**kwargsç”¨äºæ¥æ”¶ä»»æ„ç±»å‹çš„å‚æ•°
        print("Before calling function.")
        result = func(*args, **kwargs)
        print("After calling function.")
        return result
    return wrapper

@decorator # ä½¿ç”¨ @ ç¬¦å·åº”ç”¨è£…é¥°å™¨
def my_function():
    print("Inside function.")

my_function()
# è¾“å‡ºï¼š
# Before calling function.
# Inside function.
# After calling function.



# ========================è®¡         æ•°       å™¨  ========================================
def counter():
    count = 0  # å¤–éƒ¨å˜é‡
    def increment():
        nonlocal count  # ä½¿ç”¨å¤–éƒ¨å˜é‡ count
        count += 1
        return count
    return increment
# åˆ›å»ºè®¡æ•°å™¨
count_func = counter()
print(count_func())  # è¾“å‡º 1
print(count_func())  # è¾“å‡º 2
print(count_func())  # è¾“å‡º 3
print(count_func())  # è¾“å‡º 4
print(count_func())  # è¾“å‡º 5
